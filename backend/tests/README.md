# Тесты для D&D Cards Backend

Этот каталог содержит автоматизированные тесты для backend API.

## Структура тестов

- `conftest.py` - конфигурация pytest и фикстуры
- `test_cards_library.py` - тесты библиотеки карточек
- `test_weapon_templates.py` - тесты шаблонов оружия
- `test_card_creation.py` - тесты создания карточек

## Установка

```bash
cd backend/tests
make install
```

## Запуск тестов

### Базовый запуск
```bash
make test
```

### Подробный вывод
```bash
make test-verbose
```

### С HTML отчетом
```bash
make test-html
```

### Параллельный запуск
```bash
make test-parallel
```

### Конкретный тест
```bash
make test-specific TEST_NAME="test_create_basic_card"
```

## Требования

- Backend должен быть запущен на `http://localhost:8080`
- База данных должна быть доступна
- Тестовые данные должны быть загружены

## Что тестируется

### Библиотека карточек
- ✅ Получение списка карточек
- ✅ Пагинация
- ✅ Фильтрация по редкости
- ✅ Фильтрация по свойствам
- ✅ Поиск по названию
- ✅ Получение одной карточки
- ✅ Обновление карточек
- ✅ Удаление карточек
- ✅ Валидация данных

### Шаблоны оружия
- ✅ Получение всех шаблонов
- ✅ Фильтрация по категории
- ✅ Получение шаблона по ID
- ✅ Формат свойств
- ✅ Валидация данных
- ✅ Создание карточек из шаблонов
- ✅ Покрытие всех категорий
- ✅ Покрытие всех типов урона

### Создание карточек
- ✅ Базовая карточка
- ✅ Карточка со всеми полями
- ✅ Карточки оружия
- ✅ Разные редкости
- ✅ Разные свойства
- ✅ Разные типы бонусов
- ✅ Уникальность номеров
- ✅ Валидация ошибок
- ✅ Появление в библиотеке
- ✅ Подсчет количества

## Отчеты

После запуска `make test-html` будет создан файл `test_report.html` с подробным отчетом о тестах.

## Очистка

```bash
make clean
```
