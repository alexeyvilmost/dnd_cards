# Исправления проблем с формой создания/редактирования карт

## Проблемы, которые были исправлены:

### 1. ✅ Редкость не отображалась как выбранная при редактировании
**Проблема**: При редактировании карты выбранная редкость не обводилась в RaritySelector
**Причина**: Использование множественных `setValue()` вместо `reset()` для синхронизации данных формы
**Решение**: Заменил все `setValue()` на `reset()` с полным объектом данных карты

### 2. ✅ Свойства не отображались как выбранные при редактировании  
**Проблема**: При редактировании карты выбранные свойства не отображались в PropertySelector
**Причина**: Та же - неправильная синхронизация данных формы
**Решение**: Включил `properties` в объект `reset()`

### 3. ✅ Проверены другие поля формы
**Проверенные компоненты**:
- `MainSection` - редкость, название, описание, цена, вес ✅
- `EquipmentSection` - тип предмета, слот, теги, свойства, бонусы ✅  
- `TextSection` - настройки текста, выравнивание, размер шрифта ✅
- `ImageSection` - генерация и загрузка изображений ✅
- `PrivacySection` - автор, источник, тип шаблона ✅

## Технические изменения:

### В `frontend/src/pages/CardCreator.tsx`:
1. Добавлен `reset` в деструктуризацию `useForm`
2. Заменен блок множественных `setValue()` на один вызов `reset()` с полным объектом
3. Обновлены зависимости `useEffect` с `setValue` на `reset`

### Код до исправления:
```typescript
// Множественные setValue - не синхронизировались с watch()
setValue('name', card.name);
setValue('rarity', card.rarity);
setValue('properties', card.properties || []);
// ... еще 15+ setValue
```

### Код после исправления:
```typescript
// Один reset - полная синхронизация с watch()
reset({
  name: card.name,
  rarity: card.rarity,
  properties: card.properties || [],
  // ... все поля в одном объекте
});
```

## Результат:
- ✅ Редкость корректно отображается как выбранная при редактировании
- ✅ Свойства корректно отображаются как выбранные при редактировании  
- ✅ Можно убирать свойства у карт при редактировании
- ✅ Все остальные поля формы синхронизируются корректно
- ✅ Форма создания новых карт работает как прежде

## Тестирование:
После запуска Docker нужно протестировать:
1. Создание новой карты - все поля должны работать
2. Редактирование существующей карты - редкость и свойства должны отображаться
3. Изменение редкости и свойств при редактировании
4. Сохранение изменений

## Деплой:
Готово к деплою после запуска Docker и тестирования.

